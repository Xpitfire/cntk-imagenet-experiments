using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using Microsoft.CodeAnalysis.CSharp;
using Microsoft.CodeAnalysis.CSharp.Syntax;

namespace ConsoleDemo
{
    class Demo
    {
        static void Calc(string[] args)
        {
            string a = @"dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uRGlhZ25vc3RpY3M7DQp1c2luZyBTeXN0ZW0uRHJhd2luZzsNCnVzaW5nIFN5c3RlbS5JTzsNCnVzaW5nIFN5c3RlbS5MaW5xOw0KdXNpbmcgTWljcm9zb2Z0Lk1TUi5DTlRLLkV4dGVuc2liaWxpdHkuTWFuYWdlZDsNCnVzaW5nIE1pY3Jvc29mdC5NU1IuQ05USy5FeHRlbnNpYmlsaXR5Lk1hbmFnZWQuQ1NFdmFsQ2xpZW50Ow0KDQpuYW1lc3BhY2UgQ05US0RlbW8NCnsNCiAgICBjbGFzcyBQcm9ncmFtDQogICAgew0KICAgICAgICBzdGF0aWMgdm9pZCBNYWluKHN0cmluZ1tdIGFyZ3MpDQogICAgICAgIHsNCiAgICAgICAgICAgIEV2YWx1YXRlSW1hZ2VDbGFzc2lmaWNhdGlvbk1vZGVsKGFyZ3MuTGVuZ3RoID09IDEgPyBhcmdzWzBdIDogbnVsbCk7DQogICAgICAgICAgICBDb25zb2xlLlJlYWRMaW5lKCk7DQogICAgICAgIH0NCg0KICAgICAgICAvLy8gPHN1bW1hcnk+DQogICAgICAgIC8vLyBUaGlzIG1ldGhvZCBzaG93cyBob3cgdG8gZXZhbHVhdGUgYSB0cmFpbmVkIGltYWdlIGNsYXNzaWZpY2F0aW9uIG1vZGVsDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIHB1YmxpYyBzdGF0aWMgdm9pZCBFdmFsdWF0ZUltYWdlQ2xhc3NpZmljYXRpb25Nb2RlbChzdHJpbmcgaW1hZ2UgPSBudWxsKQ0KICAgICAgICB7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAvLyB1c2VkIHRvIG1lYXN1cmUgc3RhdGlzdGljcw0KICAgICAgICAgICAgICAgIHZhciBzdG9wV2F0Y2ggPSBuZXcgU3RvcHdhdGNoKCk7DQogICAgICAgICAgICAgICAgVGltZVNwYW4gaW5pdFRpbWUsIHByZWRpdGlvblRpbWU7DQoNCiAgICAgICAgICAgICAgICAvLyBUaGlzIGV4YW1wbGUgcmVxdWlyZXMgYSBwcmUtdHJhaW5lZCBSZXN0TmV0IG1vZGVsLg0KICAgICAgICAgICAgICAgIC8vIFRoZSBtb2RlbCBjYW4gYmUgZG93bmxvYWRlZCBmcm9tIDxzZWUgY3JlZj0iaHR0cHM6Ly93d3cuY250ay5haS9yZXNuZXQvUmVzTmV0XzE1Mi5tb2RlbCIvPg0KICAgICAgICAgICAgICAgIC8vIE9yIHNlZSB0aGUgZG9jdW1lbnRhdGlvbiBwYWdlIGluY2x1ZGVkIG90aGVyIG1vZGVscyANCiAgICAgICAgICAgICAgICAvLyA8c2VlIGNyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS9NaWNyb3NvZnQvQ05USy90cmVlL21hc3Rlci9FeGFtcGxlcy9JbWFnZS9DbGFzc2lmaWNhdGlvbi9SZXNOZXQiLz4NCiAgICAgICAgICAgICAgICBzdHJpbmcgd29ya2luZ0RpcmVjdG9yeSA9IEVudmlyb25tZW50LkN1cnJlbnREaXJlY3Rvcnk7DQoNCiAgICAgICAgICAgICAgICBMaXN0PGZsb2F0PiBvdXRwdXRzOw0KICAgICAgICAgICAgICAgIHVzaW5nICh2YXIgbW9kZWwgPSBuZXcgSUV2YWx1YXRlTW9kZWxNYW5hZ2VkRigpKQ0KICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSBtb2RlbCBwYXRoDQogICAgICAgICAgICAgICAgICAgIHZhciBtb2RlbEZpbGVQYXRoID0gUGF0aC5Db21iaW5lKHdvcmtpbmdEaXJlY3RvcnksICJtb2RlbHMiICwgIlJlc05ldF8xNTIubW9kZWwiKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgbW9kZWwgaXMgYXZhaWxhYmxlDQogICAgICAgICAgICAgICAgICAgIFRocm93SWZGaWxlTm90RXhpc3QobW9kZWxGaWxlUGF0aCwNCiAgICAgICAgICAgICAgICAgICAgICAgICQiRXJyb3I6IFRoZSBtb2RlbCAne21vZGVsRmlsZVBhdGh9JyBkb2VzIG5vdCBleGlzdC4gUGxlYXNlIGRvd25sb2FkIHRoZSBSZXNOZXQgbW9kZWwuIik7DQoNCiAgICAgICAgICAgICAgICAgICAgc3RvcFdhdGNoLlN0YXJ0KCk7DQogICAgICAgICAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXR3b3JrIHdpdGggdGhlIHByZS10cmFpbmVkIG1vZGVsDQogICAgICAgICAgICAgICAgICAgIG1vZGVsLkNyZWF0ZU5ldHdvcmsoJCJtb2RlbFBhdGg9XCJ7bW9kZWxGaWxlUGF0aH1cIiIsIGRldmljZUlkOiAtMSk7DQoNCiAgICAgICAgICAgICAgICAgICAgLy8gUHJlcGFyZSBpbnB1dCB2YWx1ZSBpbiB0aGUgYXBwcm9wcmlhdGUgc3RydWN0dXJlIGFuZCBzaXplDQogICAgICAgICAgICAgICAgICAgIHZhciBpbkRpbXMgPSBtb2RlbC5HZXROb2RlRGltZW5zaW9ucyhOb2RlR3JvdXAuSW5wdXQpOw0KICAgICAgICAgICAgICAgICAgICBpZiAoaW5EaW1zLkZpcnN0KCkuVmFsdWUgIT0gMjI0ICogMjI0ICogMykNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IENOVEtSdW50aW1lRXhjZXB0aW9uKA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICQiVGhlIGlucHV0IGRpbWVuc2lvbiBmb3Ige2luRGltcy5GaXJzdCgpfSBpcyB7aW5EaW1zLkZpcnN0KCkuVmFsdWV9IHdoaWNoIGlzIG5vdCB0aGUgZXhwZWN0ZWQgc2l6ZSBvZiB7MjI0KjIyNCozfS4iLA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmluZy5FbXB0eSk7DQogICAgICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2guU3RvcCgpOw0KICAgICAgICAgICAgICAgICAgICBpbml0VGltZSA9IHN0b3BXYXRjaC5FbGFwc2VkOw0KICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2guUmVzZXQoKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyBpbml0aWFsaXplIGltYWdlIGVpdGhlciBmcm9tIGNvbW1hbmQgbGluZSBvciBhcyBoYXJkLWNvZGVkIGZpbGUNCiAgICAgICAgICAgICAgICAgICAgdmFyIGltYWdlRmlsZVBhdGggPSBQYXRoLkNvbWJpbmUod29ya2luZ0RpcmVjdG9yeSwgImltYWdlcyIsIGltYWdlID8/ICJkb2cxLXdoaXRlX2JhY2tncm91bmQuanBnIik7DQogICAgICAgICAgICAgICAgICAgIFRocm93SWZGaWxlTm90RXhpc3QoaW1hZ2VGaWxlUGF0aCwgJCJFcnJvcjogVGhlIHRlc3QgaW1hZ2UgZmlsZSAne2ltYWdlRmlsZVBhdGh9JyBkb2VzIG5vdCBleGlzdC4iKTsNCg0KICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gbm9ybWFsIGltYWdlDQogICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gbmV3IGJ5dGVbXSB7MCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMCwgMCwgMjMwLCAyNDUsIDI1NSwgMjU1LCAyMCwgMTAsIDIwLCA4MCwgMTAsIDAsIDIzMCwgMjQ1LCAyNTUsIDI1NSwgMjAsIDEwLCAyMCwgODAsIDEwLCAwLCAyMzAsIDI0NSwgMjU1LCAyNTUsIDIwLCAxMCwgMjAsIDgwLCAxMH07DQogICAgICAgICAgICAgICAgICAgIHZhciBibXAgPSBUb0JpdG1hcChkYXRhLCAiZGVtby5ibXAiKTsNCg0KICAgICAgICAgICAgICAgICAgICAvL3ZhciBkYXRhID0gbmV3IGJ5dGVbXSB7IDg4LCA4OCwgODgsIDQ0LCA4OCwgODgsIDMzLCAyMiwgMzMsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIsIDQ0LCA1NSwgNjYsIDc3LCA4OCwgOTksIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDgsIDIsIDIsIDIgfTsNCiAgICAgICAgICAgICAgICAgICAgLy92YXIgYm1wID0gVG9CaXRtYXAoZGF0YSwgImRlbW8yLmJtcCIpOw0KDQogICAgICAgICAgICAgICAgICAgIHZhciByZXNpemVkID0gYm1wLlJlc2l6ZSgyMjQsIDIyNCwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgICAgIHZhciByZXNpemVkQ0hXID0gcmVzaXplZC5QYXJhbGxlbEV4dHJhY3RDSFcoKTsNCiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0cyA9IG5ldyBEaWN0aW9uYXJ5PHN0cmluZywgTGlzdDxmbG9hdD4+DQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIHsgaW5EaW1zLkZpcnN0KCkuS2V5LCByZXNpemVkQ0hXIH0NCiAgICAgICAgICAgICAgICAgICAgfTsNCg0KICAgICAgICAgICAgICAgICAgICBzdG9wV2F0Y2guU3RhcnQoKTsNCiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCB0aGUgZXZhbHVhdGUgbWV0aG9kIGFuZCBnZXQgYmFjayB0aGUgcmVzdWx0cyAoc2luZ2xlIGxheWVyIG91dHB1dCkuLi4NCiAgICAgICAgICAgICAgICAgICAgdmFyIG91dERpbXMgPSBtb2RlbC5HZXROb2RlRGltZW5zaW9ucyhOb2RlR3JvdXAuT3V0cHV0KTsNCiAgICAgICAgICAgICAgICAgICAgb3V0cHV0cyA9IG1vZGVsLkV2YWx1YXRlKGlucHV0cywgb3V0RGltcy5GaXJzdCgpLktleSk7DQogICAgICAgICAgICAgICAgICAgIHN0b3BXYXRjaC5TdG9wKCk7DQogICAgICAgICAgICAgICAgICAgIHByZWRpdGlvblRpbWUgPSBzdG9wV2F0Y2guRWxhcHNlZDsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAvLyByZXRyaWV2ZSB0b3AgMTAgcHJlZGljdGlvbnMNCiAgICAgICAgICAgICAgICB2YXIgcHJlZGljdGlvbnMgPSAoZnJvbSBwcmVkaWN0aW9uIGluIG91dHB1dHMuU2VsZWN0KCh2YWx1ZSwgaW5kZXgpID0+IG5ldyB7IFZhbHVlID0gdmFsdWUsIEluZGV4ID0gaW5kZXggfSkNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcmRlcmJ5IHByZWRpY3Rpb24uVmFsdWUgZGVzY2VuZGluZw0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdCBwcmVkaWN0aW9uKS5UYWtlKDEwKTsNCg0KICAgICAgICAgICAgICAgIC8vIHByaW50IHJlcG9ydA0KICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKCJcblxuSW5pdGlhbGl6YXRpb24gdGltZSBlbGFwc2VkOiB7MH1cblByZWRpY2l0b24gdGltZSBlbGFwc2U6IHsxfVxuIiwgaW5pdFRpbWUsIHByZWRpdGlvblRpbWUpOw0KDQogICAgICAgICAgICAgICAgLy8gaGFuZGxlIG91dHB1dCB2aWEgbG9va3VwIHRhYmxlIG1hdGNoaW5nDQogICAgICAgICAgICAgICAgdmFyIGxvb2t1cFRhYmxlUGF0aCA9IFBhdGguQ29tYmluZSh3b3JraW5nRGlyZWN0b3J5LCAiaW1hZ2VuZXRfd29yZHMudHh0Iik7DQogICAgICAgICAgICAgICAgdmFyIGxvb2t1cFRhYmxlID0gRmlsZS5SZWFkTGluZXMobG9va3VwVGFibGVQYXRoKS5Ub0xpc3QoKTsNCiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7DQogICAgICAgICAgICAgICAgZm9yZWFjaCAodmFyIHYgaW4gcHJlZGljdGlvbnMpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiUHJlZGljdGlvbiB7MH0gKFR5cGU6IHsxfSB8IFJhbmtlZDogezJ9LCBGaWxlLUluZGV4OiB7M30pIiwgDQogICAgICAgICAgICAgICAgICAgICAgICBpKyssIGxvb2t1cFRhYmxlW3YuSW5kZXhdLlN1YnN0cmluZyg5KSwgdi5WYWx1ZSwgdi5JbmRleCk7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggKENOVEtFeGNlcHRpb24gZXgpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgT25DTlRLRXhjZXB0aW9uKGV4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGNhdGNoIChFeGNlcHRpb24gZXgpDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgT25HZW5lcmFsRXhjZXB0aW9uKGV4KTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIHB1YmxpYyBzdGF0aWMgQml0bWFwIFRvQml0bWFwKGJ5dGVbXSBkYXRhLCBzdHJpbmcgbmFtZSkNCiAgICAgICAgew0KICAgICAgICAgICAgdmFyIGJ0ID0gbmV3IEJpdG1hcChkYXRhLkxlbmd0aCwgZGF0YS5MZW5ndGgpOw0KICAgICAgICAgICAgZm9yIChpbnQgeSA9IDA7IHkgPCBidC5IZWlnaHQ7IHkrKykNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBmb3IgKGludCB4ID0gMDsgeCA8IGJ0LldpZHRoOyB4KyspDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICB2YXIgYyA9IChkYXRhWyh4ICsgeSkgJSBkYXRhLkxlbmd0aF0gKiBkYXRhWyhkYXRhLkxlbmd0aCAtIHggKyB5KSAlIGRhdGEuTGVuZ3RoXSkgJSAyNTU7DQogICAgICAgICAgICAgICAgICAgIGJ0LlNldFBpeGVsKHgsIHksIENvbG9yLkZyb21BcmdiKGMsIGMsIGMpKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgICAgICBidC5TYXZlKG5hbWUpOw0KICAgICAgICAgICAgcmV0dXJuIGJ0Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gQ2hlY2tzIHdoZXRoZXIgdGhlIGZpbGUgZXhpc3RzLiBJZiBub3QsIHdyaXRlIHRoZSBlcnJvciBtZXNzYWdlIG9uIHRoZSBjb25zb2xlIGFuZCB0aHJvdyBGaWxlTm90Rm91bmRFeGNlcHRpb24uDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iZmlsZVBhdGgiPlRoZSBmaWxlIHRvIGNoZWNrLjwvcGFyYW0+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iZXJyb3JNc2ciPlRoZSBtZXNzYWdlIHRvIHdyaXRlIG9uIGNvbnNvbGUgaWYgdGhlIGZpbGUgZG9lcyBub3QgZXhpc3QuPC9wYXJhbT4NCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgdm9pZCBUaHJvd0lmRmlsZU5vdEV4aXN0KHN0cmluZyBmaWxlUGF0aCwgc3RyaW5nIGVycm9yTXNnKQ0KICAgICAgICB7DQogICAgICAgICAgICBpZiAoIUZpbGUuRXhpc3RzKGZpbGVQYXRoKSkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBpZiAoIXN0cmluZy5Jc051bGxPckVtcHR5KGVycm9yTXNnKSkNCiAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgIENvbnNvbGUuV3JpdGVMaW5lKGVycm9yTXNnKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZpbGVOb3RGb3VuZEV4Y2VwdGlvbigkIkZpbGUgJ3tmaWxlUGF0aH0nIG5vdCBmb3VuZC4iKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIEhhbmRsZSBDTlRLIGV4Y2VwdGlvbnMuDQogICAgICAgIC8vLyA8L3N1bW1hcnk+DQogICAgICAgIC8vLyA8cGFyYW0gbmFtZT0iZXgiPlRoZSBleGNlcHRpb24gdG8gYmUgaGFuZGxlZC48L3BhcmFtPg0KICAgICAgICBwcml2YXRlIHN0YXRpYyB2b2lkIE9uQ05US0V4Y2VwdGlvbihDTlRLRXhjZXB0aW9uIGV4KQ0KICAgICAgICB7DQogICAgICAgICAgICAvLyBUaGUgcGF0dGVybiAiSW5uZXIgRXhjZXB0aW9uIiBpcyB1c2VkIGJ5IEVuZDJFbmRUZXN0cyB0byBjYXRjaCB0ZXN0IGZhaWx1cmUuDQogICAgICAgICAgICBDb25zb2xlLldyaXRlTGluZSgiRXJyb3I6IHswfVxuTmF0aXZlIENhbGxTdGFjazogezF9XG4gSW5uZXIgRXhjZXB0aW9uOiB7Mn0iLCANCiAgICAgICAgICAgICAgICBleC5NZXNzYWdlLCBleC5OYXRpdmVDYWxsU3RhY2ssIGV4LklubmVyRXhjZXB0aW9uPy5NZXNzYWdlID8/ICJObyBJbm5lciBFeGNlcHRpb24iKTsNCiAgICAgICAgICAgIHRocm93IGV4Ow0KICAgICAgICB9DQoNCiAgICAgICAgLy8vIDxzdW1tYXJ5Pg0KICAgICAgICAvLy8gSGFuZGxlIGdlbmVyYWwgZXhjZXB0aW9ucy4NCiAgICAgICAgLy8vIDwvc3VtbWFyeT4NCiAgICAgICAgLy8vIDxwYXJhbSBuYW1lPSJleCI+VGhlIGV4Y2VwdGlvbiB0byBiZSBoYW5kbGVkLjwvcGFyYW0+DQogICAgICAgIHByaXZhdGUgc3RhdGljIHZvaWQgT25HZW5lcmFsRXhjZXB0aW9uKEV4Y2VwdGlvbiBleCkNCiAgICAgICAgew0KICAgICAgICAgICAgLy8gVGhlIHBhdHRlcm4gIklubmVyIEV4Y2VwdGlvbiIgaXMgdXNlZCBieSBFbmQyRW5kVGVzdHMgdG8gY2F0Y2ggdGVzdCBmYWlsdXJlLg0KICAgICAgICAgICAgQ29uc29sZS5Xcml0ZUxpbmUoIkVycm9yOiB7MH1cbkNhbGxTdGFjazogezF9XG4gSW5uZXIgRXhjZXB0aW9uOiB7Mn0iLCANCiAgICAgICAgICAgICAgICBleC5NZXNzYWdlLCBleC5TdGFja1RyYWNlLCBleC5Jbm5lckV4Y2VwdGlvbj8uTWVzc2FnZSA/PyAiTm8gSW5uZXIgRXhjZXB0aW9uIik7DQogICAgICAgICAgICB0aHJvdyBleDsNCiAgICAgICAgfQ0KDQogICAgfQ0KfQ0K";
            string b = @"dXNpbmcgU3lzdGVtOw0KdXNpbmcgU3lzdGVtLkNvbGxlY3Rpb25zLkdlbmVyaWM7DQp1c2luZyBTeXN0ZW0uTGlucTsNCnVzaW5nIFN5c3RlbS5JTzsNCg0KbmFtZXNwYWNlIFNoYXJlZA0Kew0KICAgIGNsYXNzIFV0aWxzDQogICAgew0KICAgICAgICBwdWJsaWMgc3RyaW5nIEZpbGVOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIHN0cmluZyBUZW1wRm9sZGVyIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIGludCBNYXhGaWxlU2l6ZU1CIHsgZ2V0OyBzZXQ7IH0NCiAgICAgICAgcHVibGljIExpc3Q8U3RyaW5nPiBGaWxlUGFydHMgeyBnZXQ7IHNldDsgfQ0KDQogICAgICAgIHB1YmxpYyBVdGlscygpDQogICAgICAgIHsNCiAgICAgICAgICAgIEZpbGVQYXJ0cyA9IG5ldyBMaXN0PHN0cmluZz4oKTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8vLyA8c3VtbWFyeT4NCiAgICAgICAgLy8vIG9yaWdpbmFsIG5hbWUgKyAiLnBhcnRfTi5YIiAoTiA9IGZpbGUgcGFydCBudW1iZXIsIFggPSB0b3RhbCBmaWxlcykNCiAgICAgICAgLy8vIE9iamVjdGl2ZSA9IGVudW1lcmF0ZSBmaWxlcyBpbiBmb2xkZXIsIGxvb2sgZm9yIGFsbCBtYXRjaGluZyBwYXJ0cyBvZiBzcGxpdCBmaWxlLiBJZiBmb3VuZCwgbWVyZ2UgYW5kIHJldHVybiB0cnVlLg0KICAgICAgICAvLy8gPC9zdW1tYXJ5Pg0KICAgICAgICAvLy8gPHBhcmFtIG5hbWU9IkZpbGVOYW1lIj48L3BhcmFtPg0KICAgICAgICAvLy8gPHJldHVybnM+PC9yZXR1cm5zPg0KICAgICAgICBwdWJsaWMgYm9vbCBNZXJnZUZpbGUoc3RyaW5nIEZpbGVOYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICBib29sIHJzbHQgPSBmYWxzZTsNCiAgICAgICAgICAgIC8vIHBhcnNlIG91dCB0aGUgZGlmZmVyZW50IHRva2VucyBmcm9tIHRoZSBmaWxlbmFtZSBhY2NvcmRpbmcgdG8gdGhlIGNvbnZlbnRpb24NCiAgICAgICAgICAgIHN0cmluZyBwYXJ0VG9rZW4gPSAiLnBhcnRfIjsNCiAgICAgICAgICAgIHN0cmluZyBiYXNlRmlsZU5hbWUgPSBGaWxlTmFtZS5TdWJzdHJpbmcoMCwgRmlsZU5hbWUuSW5kZXhPZihwYXJ0VG9rZW4pKTsNCiAgICAgICAgICAgIHN0cmluZyB0cmFpbGluZ1Rva2VucyA9IEZpbGVOYW1lLlN1YnN0cmluZyhGaWxlTmFtZS5JbmRleE9mKHBhcnRUb2tlbikgKyBwYXJ0VG9rZW4uTGVuZ3RoKTsNCiAgICAgICAgICAgIGludCBGaWxlSW5kZXggPSAwOw0KICAgICAgICAgICAgaW50IEZpbGVDb3VudCA9IDA7DQogICAgICAgICAgICBpbnQuVHJ5UGFyc2UodHJhaWxpbmdUb2tlbnMuU3Vic3RyaW5nKDAsIHRyYWlsaW5nVG9rZW5zLkluZGV4T2YoIi4iKSksIG91dCBGaWxlSW5kZXgpOw0KICAgICAgICAgICAgaW50LlRyeVBhcnNlKHRyYWlsaW5nVG9rZW5zLlN1YnN0cmluZyh0cmFpbGluZ1Rva2Vucy5JbmRleE9mKCIuIikgKyAxKSwgb3V0IEZpbGVDb3VudCk7DQogICAgICAgICAgICAvLyBnZXQgYSBsaXN0IG9mIGFsbCBmaWxlIHBhcnRzIGluIHRoZSB0ZW1wIGZvbGRlcg0KICAgICAgICAgICAgc3RyaW5nIFNlYXJjaHBhdHRlcm4gPSBQYXRoLkdldEZpbGVOYW1lKGJhc2VGaWxlTmFtZSkgKyBwYXJ0VG9rZW4gKyAiKiI7DQogICAgICAgICAgICBzdHJpbmdbXSBGaWxlc0xpc3QgPSBEaXJlY3RvcnkuR2V0RmlsZXMoUGF0aC5HZXREaXJlY3RvcnlOYW1lKEZpbGVOYW1lKSwgU2VhcmNocGF0dGVybik7DQogICAgICAgICAgICAvLyAgbWVyZ2UgLi4gaW1wcm92ZW1lbnQgd291bGQgYmUgdG8gY29uZmlybSBpbmRpdmlkdWFsIHBhcnRzIGFyZSB0aGVyZSAvIGNvcnJlY3RseSBpbiBzZXF1ZW5jZSwgYSBzZWN1cml0eSBjaGVjayB3b3VsZCBhbHNvIGJlIGltcG9ydGFudA0KICAgICAgICAgICAgLy8gb25seSBwcm9jZWVkIGlmIHdlIGhhdmUgcmVjZWl2ZWQgYWxsIHRoZSBmaWxlIGNodW5rcw0KICAgICAgICAgICAgaWYgKEZpbGVzTGlzdC5Db3VudCgpID09IEZpbGVDb3VudCkgDQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgLy8gdXNlIGEgc2luZ2xldG9uIHRvIHN0b3Agb3ZlcmxhcHBpbmcgcHJvY2Vzc2VzDQogICAgICAgICAgICAgICAgaWYgKCFNZXJnZUZpbGVNYW5hZ2VyLkluc3RhbmNlLkluVXNlKGJhc2VGaWxlTmFtZSkpDQogICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICBNZXJnZUZpbGVNYW5hZ2VyLkluc3RhbmNlLkFkZEZpbGUoYmFzZUZpbGVOYW1lKTsNCiAgICAgICAgICAgICAgICAgICAgaWYgKEZpbGUuRXhpc3RzKGJhc2VGaWxlTmFtZSkpDQogICAgICAgICAgICAgICAgICAgICAgICBGaWxlLkRlbGV0ZShiYXNlRmlsZU5hbWUpOw0KICAgICAgICAgICAgICAgICAgICAvLyBhZGQgZWFjaCBmaWxlIGxvY2F0ZWQgdG8gYSBsaXN0IHNvIHdlIGNhbiBnZXQgdGhlbSBpbnRvIA0KICAgICAgICAgICAgICAgICAgICAvLyB0aGUgY29ycmVjdCBvcmRlciBmb3IgcmVidWlsZGluZyB0aGUgZmlsZQ0KICAgICAgICAgICAgICAgICAgICBMaXN0PFNvcnRlZEZpbGU+IE1lcmdlTGlzdCA9IG5ldyBMaXN0PFNvcnRlZEZpbGU+KCk7DQogICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHN0cmluZyBGaWxlIGluIEZpbGVzTGlzdCkNCiAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgU29ydGVkRmlsZSBzRmlsZSA9IG5ldyBTb3J0ZWRGaWxlKCk7DQogICAgICAgICAgICAgICAgICAgICAgICBzRmlsZS5GaWxlTmFtZSA9IEZpbGU7DQogICAgICAgICAgICAgICAgICAgICAgICBiYXNlRmlsZU5hbWUgPSBGaWxlLlN1YnN0cmluZygwLCBGaWxlLkluZGV4T2YocGFydFRva2VuKSk7DQogICAgICAgICAgICAgICAgICAgICAgICB0cmFpbGluZ1Rva2VucyA9IEZpbGUuU3Vic3RyaW5nKEZpbGUuSW5kZXhPZihwYXJ0VG9rZW4pICsgcGFydFRva2VuLkxlbmd0aCk7DQogICAgICAgICAgICAgICAgICAgICAgICBpbnQuVHJ5UGFyc2UodHJhaWxpbmdUb2tlbnMuU3Vic3RyaW5nKDAsIHRyYWlsaW5nVG9rZW5zLkluZGV4T2YoIi4iKSksIG91dCBGaWxlSW5kZXgpOw0KICAgICAgICAgICAgICAgICAgICAgICAgc0ZpbGUuRmlsZU9yZGVyID0gRmlsZUluZGV4Ow0KICAgICAgICAgICAgICAgICAgICAgICAgTWVyZ2VMaXN0LkFkZChzRmlsZSk7DQogICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgLy8gc29ydCBieSB0aGUgZmlsZS1wYXJ0IG51bWJlciB0byBlbnN1cmUgd2UgbWVyZ2UgYmFjayBpbiB0aGUgY29ycmVjdCBvcmRlcg0KICAgICAgICAgICAgICAgICAgICB2YXIgTWVyZ2VPcmRlciA9IE1lcmdlTGlzdC5PcmRlckJ5KHMgPT4gcy5GaWxlT3JkZXIpLlRvTGlzdCgpOyANCiAgICAgICAgICAgICAgICAgICAgdXNpbmcgKEZpbGVTdHJlYW0gRlMgPSBuZXcgRmlsZVN0cmVhbShiYXNlRmlsZU5hbWUsIEZpbGVNb2RlLkNyZWF0ZSkpDQogICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG1lcmdlIGVhY2ggZmlsZSBjaHVuayBiYWNrIGludG8gb25lIGNvbnRpZ3VvdXMgZmlsZSBzdHJlYW0NCiAgICAgICAgICAgICAgICAgICAgICAgIGZvcmVhY2ggKHZhciBjaHVuayBpbiBNZXJnZU9yZGVyKQ0KICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNpbmcgKEZpbGVTdHJlYW0gZmlsZUNodW5rID0gbmV3IEZpbGVTdHJlYW0oY2h1bmsuRmlsZU5hbWUsIEZpbGVNb2RlLk9wZW4pKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlQ2h1bmsuQ29weVRvKEZTKTsNCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXRjaCAoSU9FeGNlcHRpb24gZXgpDQogICAgICAgICAgICAgICAgICAgICAgICAgICAgew0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBoYW5kbGUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICAgICByc2x0ID0gdHJ1ZTsNCiAgICAgICAgICAgICAgICAgICAgLy8gdW5sb2NrIHRoZSBmaWxlIGZyb20gc2luZ2xldG9uDQogICAgICAgICAgICAgICAgICAgIE1lcmdlRmlsZU1hbmFnZXIuSW5zdGFuY2UuUmVtb3ZlRmlsZShiYXNlRmlsZU5hbWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiByc2x0Ow0KICAgICAgICB9DQoNCg0KICAgIH0NCg0KICAgIHB1YmxpYyBzdHJ1Y3QgU29ydGVkRmlsZQ0KICAgIHsNCiAgICAgICAgcHVibGljIGludCBGaWxlT3JkZXIgeyBnZXQ7IHNldDsgfQ0KICAgICAgICBwdWJsaWMgU3RyaW5nIEZpbGVOYW1lIHsgZ2V0OyBzZXQ7IH0NCiAgICB9DQoNCiAgICBwdWJsaWMgY2xhc3MgTWVyZ2VGaWxlTWFuYWdlcg0KICAgIHsNCiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgTWVyZ2VGaWxlTWFuYWdlciBpbnN0YW5jZTsNCiAgICAgICAgcHJpdmF0ZSBMaXN0PHN0cmluZz4gTWVyZ2VGaWxlTGlzdDsNCg0KICAgICAgICBwcml2YXRlIE1lcmdlRmlsZU1hbmFnZXIoKQ0KICAgICAgICB7DQogICAgICAgICAgICB0cnkNCiAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICBNZXJnZUZpbGVMaXN0ID0gbmV3IExpc3Q8c3RyaW5nPigpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgY2F0Y2ggeyB9DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgc3RhdGljIE1lcmdlRmlsZU1hbmFnZXIgSW5zdGFuY2UNCiAgICAgICAgew0KICAgICAgICAgICAgZ2V0DQogICAgICAgICAgICB7DQogICAgICAgICAgICAgICAgaWYgKGluc3RhbmNlID09IG51bGwpDQogICAgICAgICAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IE1lcmdlRmlsZU1hbmFnZXIoKTsNCiAgICAgICAgICAgICAgICByZXR1cm4gaW5zdGFuY2U7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgdm9pZCBBZGRGaWxlKHN0cmluZyBCYXNlRmlsZU5hbWUpDQogICAgICAgIHsNCiAgICAgICAgICAgIE1lcmdlRmlsZUxpc3QuQWRkKEJhc2VGaWxlTmFtZSk7DQogICAgICAgIH0NCg0KICAgICAgICBwdWJsaWMgYm9vbCBJblVzZShzdHJpbmcgQmFzZUZpbGVOYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gTWVyZ2VGaWxlTGlzdC5Db250YWlucyhCYXNlRmlsZU5hbWUpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIGJvb2wgUmVtb3ZlRmlsZShzdHJpbmcgQmFzZUZpbGVOYW1lKQ0KICAgICAgICB7DQogICAgICAgICAgICByZXR1cm4gTWVyZ2VGaWxlTGlzdC5SZW1vdmUoQmFzZUZpbGVOYW1lKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KfQ0K";
            string c = a + b;
            string d = b + a + b;
            var source = Encoding.UTF8.GetString(Convert.FromBase64String(d));
            var tree = CSharpSyntaxTree.ParseText(source);
            var root = (CompilationUnitSyntax)tree.GetRoot();
            var tokens = root.DescendantTokens();
            Console.WriteLine();
        }
    }
}
